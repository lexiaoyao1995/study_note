### DNS获取流程

1、用户主机上运行着DNS客户端

2、浏览器将接受到的url中抽取出域名字段，就是访问的主机名

http://www.baidu.com，并将这个域名传送给dns应用的客户端

3、dns客户端向dns服务器发送一份查询报文，报文中包含着要访问的主机名字段

4、该dns客户端最终会收到一份回答报文，其中包含有该主机名对应的ip地址

5、一旦该浏览器收到dns的ip地址，就可以向该ip地址定位的http服务器发起tcp连接。



### https和http区别

http被广泛应用于web通信中，但是是以明文形式传输数据，若被拦截截取数据，可直接读取用户信息，因此需要对一些敏感的信息进行加密。

因此http协议基础上加入ssl协议，ssl依靠证书对客户端进行验证，并对数据进行加密。

##### 区别

1、https需要到ca申请证书

2、http是通过超文本传输协议是明文形式，https通过ssl对数据进行加密

3、默认端口：https 443   http 80

##### https工作原理

1、客户端访问服务器，建立ssl连接

2、服务器将证书和公钥发送给客户端

3、设置加密等级

4、客户端根据加密等级生成私钥，利用公钥对私钥加密，将结果发送给服务器端

5、服务器根据公钥解出私钥

6、客户端和服务器端分别根据秘钥对信息进行加解密



### 在TCP四次挥手中，从time_wait到closed状态有一个超市，这个超市设置是2MSL（最长数据报寿命），为什么

1、保证客户端最后发送的ACK能够传到服务器端

最后这个ack可能会丢失，如果丢失了，那么客户端会重新发送FIN信号等待确认，而客户端就能在2MSL时间内重传数据

2、客户端在发送最后ack后，经过2MSL后，就可以使本地链接时间内所有的报文从网络中消失，这样以后的报文传输就不会有之前残留报文的干扰。



### 为什么要三次握手

最少其实两次就可以建立链接，但是如果有这种情况。

如果一个连接请求在网络中超时了，这时客户端会重新发送请求，但这个超时的请求最后还是跑到了，然后客户端就接收了两个请求，然后全部回应就会创建两个连接，浪费资源。

### 为什么要四次挥手

tcp是双向的，需要在两个方向关闭，每个方向都需要请求和确认，所以是4次。